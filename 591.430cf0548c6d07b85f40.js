(self.webpackChunkmirage=self.webpackChunkmirage||[]).push([[591],{6591:(t,r,e)=>{"use strict";e.r(r),e.d(r,{LoginModule:()=>q});var i=e(4387),o=e(1462),s=e(3487),n=e(529),a=e(7368),l=e(3796),u=e(9624),c=e(7511),p=e(2290),g=e(1116),m=e(6726),d=e(9892),f=e(5407),Z=e(1146);const h=function(t,r){return{"layout-dark":t,"layout-light":r}},v=[{path:"",component:(()=>{class t{constructor(t,r,e,i,s,a,l){this.fb=t,this.service=r,this.router=e,this.route=i,this.titleTab=s,this.dialog=a,this.messageService=l,this.titleTab.setTitle("RMI Survey - Login"),this.forms=this.fb.group({login:["",o.kI.required],password:["",o.kI.required],db:n.N.db}),this.initialForm=this.forms.value}ngOnInit(){localStorage.removeItem("roleid"),localStorage.removeItem("menulink"),this.service.logout(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}onSubmit(){if(this.forms.valid){const t=this.dialog.open(s.m,{data:{message:"Authentication..."}});this.service.login({jsonrpc:"2.0",params:this.forms.value}).subscribe(r=>{t.close(!0),r.result&&(this.service.storeLocal(r.result),this.router.navigate([this.returnUrl]))},r=>{if(t.close(!0),Array.isArray(r.error.error))for(var e=0;e<r.error.error.length;e++)this.messageService.add({key:"toast-notif",severity:"error",summary:"Error",detail:r.error.error[e]});else this.messageService.add({key:"toast-notif",severity:"error",summary:"Error",detail:r.error})})}}ngOnDestroy(){this.forms.reset(this.initialForm)}}return t.\u0275fac=function(r){return new(r||t)(a.Y36(o.qu),a.Y36(l.$),a.Y36(i.F0),a.Y36(i.gz),a.Y36(u.Dx),a.Y36(c.xA),a.Y36(p.ez))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-login"]],decls:32,vars:5,consts:[[1,"login-body",3,"ngClass"],[1,"login-content"],[1,"night-switch"],["styleClass","dark-switch","icon","pi pi-circle-on",3,"click"],["styleClass","light-switch","icon","pi pi-circle-off",3,"click"],[1,"login-panel"],[1,"login-panel-content"],[1,"logo"],[3,"formGroup","submit"],[1,"forms"],[1,"login-input-wrapper"],["for","username"],["id","username","pInputText","","placeholder","Type your username...","formControlName","login"],[1,"pi","pi-user"],["for","password"],["type","password","id","password","placeholder","Type your password","pPassword","","formControlName","password"],[1,"pi","pi-lock"],[1,"buttons"],["pButton","","type","submit","label","Login"],[2,"margin-top","50px"],[1,"desert"],["key","toast-notif"]],template:function(t,r){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"p-button",3),a.NdJ("click",function(){return r.dark=!0}),a.qZA(),a.TgZ(4,"p-button",4),a.NdJ("click",function(){return r.dark=!1}),a.qZA(),a.qZA(),a.TgZ(5,"div",5),a.TgZ(6,"div",6),a._UZ(7,"div",7),a.TgZ(8,"h1"),a._uU(9,"Sign in to Risk Maturity Institute"),a.qZA(),a.TgZ(10,"p"),a._uU(11,"Welcome, please use the form to sign-in Risk Maturity Institute"),a.qZA(),a.TgZ(12,"form",8),a.NdJ("submit",function(){return r.onSubmit()}),a.TgZ(13,"div",9),a.TgZ(14,"div",10),a.TgZ(15,"label",11),a._uU(16,"Username"),a.qZA(),a._UZ(17,"input",12),a._UZ(18,"i",13),a.qZA(),a.TgZ(19,"div",10),a.TgZ(20,"label",14),a._uU(21,"Password"),a.qZA(),a._UZ(22,"input",15),a._UZ(23,"i",16),a.qZA(),a.TgZ(24,"div",17),a._UZ(25,"button",18),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"div",19),a.TgZ(27,"p"),a.TgZ(28,"marquee"),a._uU(29,"@Copyright 2024"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(30,"div",20),a.qZA(),a.qZA(),a._UZ(31,"p-toast",21)),2&t&&(a.Q6J("ngClass",a.WLB(2,h,r.dark,!r.dark)),a.xp6(12),a.Q6J("formGroup",r.forms))},directives:[g.mk,m.zx,o._Y,o.JL,o.sg,o.Fj,d.o,o.JJ,o.u,f.QK,m.Hq,Z.FN],styles:[".waviy[_ngcontent-%COMP%], .waviy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative}.waviy[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:14px;color:#1c9ce5;text-transform:uppercase;animation:flip 2s infinite;animation-delay:calc(.2s * var(--i))}@keyframes flip{0%,80%{transform:rotateY(1turn)}}"]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[i.Bz.forChild(v)],i.Bz]}),t})();var k=e(1455);let q=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({providers:[p.ez],imports:[[k.I,y]]}),t})()}}]);